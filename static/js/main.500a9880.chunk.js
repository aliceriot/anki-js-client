(this.webpackJsonpkanji=this.webpackJsonpkanji||[]).push([[0],{38:function(e,t,n){e.exports=n(70)},43:function(e,t,n){},44:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),i=n.n(l),c=(n(43),n(44),n(2)),u=n(5),o=n(71),m=n(6);function s(e){var t=e.item,n=e.label,a=e.fieldName,l=e.html;return r.a.createElement("div",{className:"dialog-field"},r.a.createElement("div",{className:"label"},n,":"),r.a.createElement("div",{className:"value"},l?r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.fields[a].value}}):t.fields[a].value))}var f=n(31),d=n(32),v=n(36),b=n(33),j=n(37),h=n(34),E=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handleClickOutside=function(e){(0,n.props.hide)()},n}return Object(j.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement("dialog",{open:!0,className:"item-dialog"},e)}}]),t}(a.Component),O=Object(h.a)(E),g=n(9),N=n(12),p=n.n(N),k=Object(g.a)((function(e){return e.entities.notesInDecks}),(function(e){return{kanjiNotes:e?e.kanji:null,vocabNotes:e?e.vocab:null}})),_=Object(g.a)((function(e){return e.entities.kanji}),(function(e){return p()((function(t){return e[t]}))})),y=Object(g.a)((function(e){return e.entities.kanji}),(function(e){return p()((function(t){if(e){var n=Object.keys(e).filter((function(n){return e[n].tags[1]===t})),a=n.map((function(t){return e[t]}));return[n,a]}return[]}))})),S=Object(g.a)((function(e){return e.entities.vocab}),(function(e){return p()((function(t){return e[t]}))})),w=Object(g.a)((function(e){return e.entities.vocab}),(function(e){return p()((function(t){if(e){var n=Object.keys(e).filter((function(n){return e[n].tags[0]===t})),a=n.map((function(t){return e[t]}));return[n,a]}return[]}))})),R=Object(g.a)((function(e){return e.entities.kanji}),(function(e){return p()((function(t){if(e){var n=[];return t.forEach((function(t){n=n.concat(e[t].cards)})),n}return null}))})),C=Object(g.a)((function(e){return e.entities.vocab}),(function(e){return p()((function(t){if(e){var n=[];return t.forEach((function(t){n=n.concat(e[t].cards)})),n}return null}))})),q=function(e){var t,n,a=e>500?1:e/500;return(a*=100)<50?(t=255,n=Math.round(5.1*a)):(n=255,t=Math.round(510-5.1*a)),"#"+("000000"+(65536*t+256*n+0).toString(16)).slice(-6)};function x(e){var t=e.kanji,n=Object(c.useSelector)(_)(t),l=Object(a.useState)(!1),i=Object(m.a)(l,2),u=i[0],o=i[1];return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"kanji",onClick:function(){return o(!0)},style:{backgroundColor:n.interval_avg?q(n.interval_avg):"white"}},n.fields.Kanji.value),u?r.a.createElement(O,{hide:function(){return o(!1)}},r.a.createElement("h2",{className:"dialog-title"},n.fields.Kanji.value),r.a.createElement(s,{item:n,label:"meaning",fieldName:"Kanji_Meaning"}),r.a.createElement(s,{item:n,label:"\u97f3\u8aad\u307f",fieldName:"Reading_On",html:!0}),r.a.createElement(s,{item:n,label:"\u8a13\u8aad\u307f",fieldName:"Reading_Kun",html:!0}),r.a.createElement(s,{item:n,label:"\u90e8\u9996",fieldName:"Radicals_Names"}),r.a.createElement(s,{item:n,label:"meaning mnemonic",fieldName:"Meaning_Mnemonic",html:!0}),r.a.createElement(s,{item:n,label:"meaning info",fieldName:"Meaning_Info",html:!0}),r.a.createElement(s,{item:n,label:"reading mnemonic",fieldName:"Reading_Mnemonic",html:!0}),r.a.createElement(s,{item:n,label:"reading info",fieldName:"Reading_Info",html:!0})):null):null}function I(e){var t=e.vocab,n=Object(c.useSelector)(S)(t),l=Object(a.useState)(!1),i=Object(m.a)(l,2),u=i[0],o=i[1];return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"vocab",onClick:function(){return o(!0)},key:t,style:{backgroundColor:n.interval_avg?q(n.interval_avg):"white"}},n.fields.Vocab.value),u?r.a.createElement(O,{hide:function(){return o(!1)}},r.a.createElement("h2",{className:"dialog-title"},n.fields.Vocab.value),r.a.createElement(s,{item:n,label:"meaning",fieldName:"Meaning"}),r.a.createElement(s,{item:n,label:"part of speech",fieldName:"Speech-Type"}),r.a.createElement(s,{item:n,label:"reading",fieldName:"Reading",html:!0}),r.a.createElement(s,{item:n,label:"\u767a\u97f3",fieldName:"Pronunciation",html:!0}),r.a.createElement(s,{item:n,label:"meaning mnemonic",fieldName:"Meaning-Exp",html:!0}),r.a.createElement(s,{item:n,label:"reading mnemonic",fieldName:"Reading-Exp",html:!0}),r.a.createElement(s,{item:n,label:"\u65e5\u672c\u8a9e",fieldName:"Context1-jp",html:!0}),r.a.createElement(s,{item:n,label:"\u82f1\u8a9e",fieldName:"Context1-en",html:!0}),r.a.createElement(s,{item:n,label:"\u65e5\u672c\u8a9e",fieldName:"Context2-jp",html:!0}),r.a.createElement(s,{item:n,label:"\u82f1\u8a9e",fieldName:"Context2-en",html:!0}),r.a.createElement(s,{item:n,label:"\u65e5\u672c\u8a9e",fieldName:"Context3-jp",html:!0}),r.a.createElement(s,{item:n,label:"\u82f1\u8a9e",fieldName:"Context3-en",html:!0})):null):null}var M=n(17),T=n(73),D=n(72),K="http://127.0.0.1:8765",P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{action:e,params:t,version:6}},V=function(e,t){return function(){return{url:K,body:P("findNotes",{query:"deck:".concat(e)}),transform:function(e){return{notesInDecks:Object(M.a)({},t,e)}},update:{notesInDecks:T.a},options:{method:"POST"}}}},F=V("\u65e5\u672c\u8a9e::kanji","kanji"),X=V("\u65e5\u672c\u8a9e::kanji_vocab","vocab"),J=function(e,t){return function(n){return{url:K,body:P("notesInfo",{notes:n}),transform:function(n){var a={};return n.forEach((function(e){a[e.fields[t].value]=e})),Object(M.a)({},e,a)},update:Object(M.a)({},e,T.a),options:{method:"POST"}}}},L=J("kanji","Kanji"),A=J("vocab","Vocab"),B=function(e){return{url:K,body:P("cardsInfo",{cards:e}),transform:function(e){return{kanji:e.filter((function(e){return"\u65e5\u672c\u8a9e::kanji"===e.deckName})),vocab:e.filter((function(e){return"\u65e5\u672c\u8a9e::kanji_vocab"===e.deckName}))}},update:{kanji:function(e,t){return t.forEach((function(t){var n=e[t.fields.Kanji.value];n?(n.interval?n.interval.push(t.interval):n.interval=[t.interval],n.interval_avg=Object(D.a)(n.interval)):(console.log(t),console.log("didnt find"))})),e},vocab:function(e,t){return t.forEach((function(t){var n=e[t.fields.Vocab.value];n?(n.interval?n.interval.push(t.interval):n.interval=[t.interval],n.interval_avg=Object(D.a)(n.interval)):(console.log(t),console.log("didnt find"))})),e}},options:{method:"POST"}}};function U(e){var t=e.level,n=Object(a.useState)(!1),l=Object(m.a)(n,2),i=l[0],o=l[1],s=Object(c.useSelector)(y)(t),f=Object(m.a)(s,2),d=f[0],v=f[1],b=Object(c.useSelector)(w)(t),j=Object(m.a)(b,2),h=j[0],E=j[1],O=Object(c.useSelector)(R)(d),g=Object(c.useSelector)(C)(h),N=Object(u.useRequest)(O&&i?B(O):null),p=Object(m.a)(N,2),k=p[0].isFinished,_=p[1],S=Object(u.useRequest)(g&&i?B(g):null),q=Object(m.a)(S,2),M=q[0].isFinished,T=q[1],D=k?v.filter((function(e){return 0!==e.interval_avg})).length:0,K=M?E.filter((function(e){return 0!==e.interval_avg})).length:0;return r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-header"},r.a.createElement("div",{class:"level-name",onClick:function(){return o(!i)}},t),i?r.a.createElement("div",{class:"refresh",onClick:function(){_(),T()}},"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5"):null),i?r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"sub-level-heading"},r.a.createElement("h3",null,"\u6f22\u5b57"),k?r.a.createElement("div",{className:"num-learned"},D," / ",v.length):null),k?r.a.createElement("div",{className:"kanjis"},d.map((function(e){return r.a.createElement(x,{kanji:e,key:e})}))):null,r.a.createElement("div",{className:"sub-level-heading"},r.a.createElement("h3",null,"\u8a9e\u5f59"),M?r.a.createElement("div",{className:"num-learned"},K," / ",E.length):null),M?r.a.createElement("div",{className:"vocabs"},h.map((function(e){return r.a.createElement(I,{vocab:e,key:e})}))):null):null)}var W=Object(o.a)((function(e){return"level".concat(e+1)}),60);function H(){Object(u.useRequest)(F()),Object(u.useRequest)(X());var e=Object(c.useSelector)(k),t=e.kanjiNotes,n=e.vocabNotes;return Object(u.useRequest)(t?L(t):null),Object(u.useRequest)(n?A(n):null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"item-list"},W.map((function(e){return r.a.createElement(U,{level:e})}))))}var $=n(19),z=n.n($),G=n(35),Q=n(10),Y=n(7),Z=Object(Q.c)({entities:Y.entitiesReducer,queries:Y.queriesReducer}),ee=Object(Q.e)(Z,Object(Q.d)(Object(Q.a)(Object(Y.queryMiddleware)((function(e,t,n){var a=n.body;return{execute:function(){var n=Object(G.a)(z.a.mark((function n(r){var l,i,c;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:t,body:JSON.stringify(a)});case 2:return l=n.sent,n.next=5,l.json();case 5:i=n.sent,c=i.result,r(void 0,l.status,c);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),(function(e){return e.queries}),(function(e){return e.entities}))),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),te=function(e){return e.queries};var ne=function(){return r.a.createElement(c.Provider,{store:ee},r.a.createElement(u.Provider,{queriesSelector:te},r.a.createElement(H,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.500a9880.chunk.js.map