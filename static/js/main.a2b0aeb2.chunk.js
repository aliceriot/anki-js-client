(this.webpackJsonpkanji=this.webpackJsonpkanji||[]).push([[0],{38:function(e,t,n){e.exports=n(70)},43:function(e,t,n){},44:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),l=n.n(i),c=(n(43),n(44),n(2)),o=n(5),u=n(71),m=n(6);function s(e){var t=e.item,n=e.label,a=e.fieldName,i=e.html;return r.a.createElement("div",{className:"dialog-field"},r.a.createElement("div",{className:"label"},n,":"),r.a.createElement("div",{className:"value"},i?r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.fields[a].value}}):t.fields[a].value))}var f=n(31),d=n(32),v=n(36),b=n(33),j=n(37),h=n(34),E=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handleClickOutside=function(e){(0,n.props.hide)()},n}return Object(j.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement("dialog",{open:!0,className:"item-dialog"},e)}}]),t}(a.Component),O=Object(h.a)(E),g=n(9),N=n(12),k=n.n(N),p=Object(g.a)((function(e){return e.entities.notesInDecks}),(function(e){return{kanjiNotes:e?e.kanji:null,vocabNotes:e?e.vocab:null}})),_=Object(g.a)((function(e){return e.entities.kanji}),(function(e){return k()((function(t){return e[t]}))})),y=Object(g.a)((function(e){return e.entities.kanji}),(function(e){return k()((function(t){if(e){var n=Object.keys(e).filter((function(n){return e[n].tags[1]===t})),a=n.map((function(t){return e[t]}));return[n,a]}return[]}))})),S=Object(g.a)((function(e){return e.entities.vocab}),(function(e){return k()((function(t){return e[t]}))})),w=Object(g.a)((function(e){return e.entities.vocab}),(function(e){return k()((function(t){if(e){var n=Object.keys(e).filter((function(n){return e[n].tags[0]===t})),a=n.map((function(t){return e[t]}));return[n,a]}return[]}))})),R=Object(g.a)((function(e){return e.entities.kanji}),(function(e){return k()((function(t){if(e){var n=[];return t.forEach((function(t){n=n.concat(e[t].cards)})),n}return null}))})),C=Object(g.a)((function(e){return e.entities.vocab}),(function(e){return k()((function(t){if(e){var n=[];return t.forEach((function(t){n=n.concat(e[t].cards)})),n}return null}))})),q=function(e){var t,n,a=e>500?1:e/500;return(a*=100)<50?(t=255,n=Math.round(5.1*a)):(n=255,t=Math.round(510-5.1*a)),"#"+("000000"+(65536*t+256*n+0).toString(16)).slice(-6)};function x(e){var t=e.kanji,n=Object(c.useSelector)(_)(t),i=Object(a.useState)(!1),l=Object(m.a)(i,2),o=l[0],u=l[1];return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"kanji",onClick:function(){return u(!0)},style:{backgroundColor:n.interval_avg?q(n.interval_avg):"white"}},n.fields.Kanji.value),o?r.a.createElement(O,{hide:function(){return u(!1)}},r.a.createElement("h2",{className:"dialog-title"},n.fields.Kanji.value),r.a.createElement(s,{item:n,label:"meaning",fieldName:"Kanji_Meaning"}),r.a.createElement(s,{item:n,label:"\u97f3\u8aad\u307f",fieldName:"Reading_On",html:!0}),r.a.createElement(s,{item:n,label:"\u8a13\u8aad\u307f",fieldName:"Reading_Kun",html:!0}),r.a.createElement(s,{item:n,label:"\u90e8\u9996",fieldName:"Radicals_Names"}),r.a.createElement(s,{item:n,label:"meaning mnemonic",fieldName:"Meaning_Mnemonic",html:!0}),r.a.createElement(s,{item:n,label:"meaning info",fieldName:"Meaning_Info",html:!0}),r.a.createElement(s,{item:n,label:"reading mnemonic",fieldName:"Reading_Mnemonic",html:!0}),r.a.createElement(s,{item:n,label:"reading info",fieldName:"Reading_Info",html:!0})):null):null}function I(e){var t=e.vocab,n=Object(c.useSelector)(S)(t),i=Object(a.useState)(!1),l=Object(m.a)(i,2),o=l[0],u=l[1];return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"vocab",onClick:function(){return u(!0)},key:t,style:{backgroundColor:n.interval_avg?q(n.interval_avg):"white"}},n.fields.Vocab.value),o?r.a.createElement(O,{hide:function(){return u(!1)}},r.a.createElement("h2",{className:"dialog-title"},n.fields.Vocab.value),r.a.createElement(s,{item:n,label:"meaning",fieldName:"Meaning"}),r.a.createElement(s,{item:n,label:"part of speech",fieldName:"Speech-Type"}),r.a.createElement(s,{item:n,label:"reading",fieldName:"Reading",html:!0}),r.a.createElement(s,{item:n,label:"\u767a\u97f3",fieldName:"Pronunciation",html:!0}),r.a.createElement(s,{item:n,label:"meaning mnemonic",fieldName:"Meaning-Exp",html:!0}),r.a.createElement(s,{item:n,label:"reading mnemonic",fieldName:"Reading-Exp",html:!0}),r.a.createElement(s,{item:n,label:"\u65e5\u672c\u8a9e",fieldName:"Context1-jp",html:!0}),r.a.createElement(s,{item:n,label:"\u82f1\u8a9e",fieldName:"Context1-en",html:!0}),r.a.createElement(s,{item:n,label:"\u65e5\u672c\u8a9e",fieldName:"Context2-jp",html:!0}),r.a.createElement(s,{item:n,label:"\u82f1\u8a9e",fieldName:"Context2-en",html:!0}),r.a.createElement(s,{item:n,label:"\u65e5\u672c\u8a9e",fieldName:"Context3-jp",html:!0}),r.a.createElement(s,{item:n,label:"\u82f1\u8a9e",fieldName:"Context3-en",html:!0})):null):null}var M=n(17),T=n(73),D=n(72),K="http://127.0.0.1:8765",P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{action:e,params:t,version:6}},V=function(e,t){return function(){return{url:K,body:P("findNotes",{query:"deck:".concat(e)}),transform:function(e){return{notesInDecks:Object(M.a)({},t,e)}},update:{notesInDecks:T.a},options:{method:"POST"}}}},F=V("\u65e5\u672c\u8a9e::kanji","kanji"),X=V("\u65e5\u672c\u8a9e::kanji_vocab","vocab"),J=function(e,t){return function(n){return{url:K,body:P("notesInfo",{notes:n}),transform:function(n){var a={};return n.forEach((function(e){a[e.fields[t].value]=e})),Object(M.a)({},e,a)},update:Object(M.a)({},e,T.a),options:{method:"POST"}}}},L=J("kanji","Kanji"),A=J("vocab","Vocab"),B=function(e){return{url:K,body:P("cardsInfo",{cards:e}),transform:function(e){return{kanji:e.filter((function(e){return"\u65e5\u672c\u8a9e::kanji"===e.deckName})),vocab:e.filter((function(e){return"\u65e5\u672c\u8a9e::kanji_vocab"===e.deckName}))}},update:{kanji:function(e,t){return t.forEach((function(t){var n=e[t.fields.Kanji.value];n?(n.interval?n.interval.push(t.interval):n.interval=[t.interval],n.interval_avg=Object(D.a)(n.interval)):(console.log(t),console.log("didnt find"))})),e},vocab:function(e,t){return t.forEach((function(t){var n=e[t.fields.Vocab.value];n?(n.interval?n.interval.push(t.interval):n.interval=[t.interval],n.interval_avg=Object(D.a)(n.interval)):(console.log(t),console.log("didnt find"))})),e}},options:{method:"POST"}}};function U(e){var t=e.level,n=Object(a.useState)(!1),i=Object(m.a)(n,2),l=i[0],u=i[1],s=Object(c.useSelector)(y)(t),f=Object(m.a)(s,1)[0],d=Object(c.useSelector)(w)(t),v=Object(m.a)(d,1)[0],b=Object(c.useSelector)(R)(f),j=Object(c.useSelector)(C)(v),h=Object(o.useRequest)(b&&l?B(b):null),E=Object(m.a)(h,2),O=E[0].isFinished,g=E[1],N=Object(o.useRequest)(j&&l?B(j):null),k=Object(m.a)(N,2),p=k[0].isFinished,_=k[1];return r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-header"},r.a.createElement("div",{class:"level-name",onClick:function(){return u(!l)}},t),l?r.a.createElement("div",{class:"refresh",onClick:function(){g(),_()}},"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5"):null),l?r.a.createElement("div",{className:"level"},r.a.createElement("h3",null,"kanji"),O?r.a.createElement("div",{className:"kanjis"},f.map((function(e){return r.a.createElement(x,{kanji:e,key:e})}))):null,r.a.createElement("h3",null,"vocab"),p?r.a.createElement("div",{className:"vocabs"},v.map((function(e){return r.a.createElement(I,{vocab:e,key:e})}))):null):null)}var W=Object(u.a)((function(e){return"level".concat(e+1)}),60);function H(){Object(o.useRequest)(F()),Object(o.useRequest)(X());var e=Object(c.useSelector)(p),t=e.kanjiNotes,n=e.vocabNotes;return Object(o.useRequest)(t?L(t):null),Object(o.useRequest)(n?A(n):null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"item-list"},W.map((function(e){return r.a.createElement(U,{level:e})}))))}var $=n(19),z=n.n($),G=n(35),Q=n(10),Y=n(7),Z=Object(Q.c)({entities:Y.entitiesReducer,queries:Y.queriesReducer}),ee=Object(Q.e)(Z,Object(Q.d)(Object(Q.a)(Object(Y.queryMiddleware)((function(e,t,n){var a=n.body;return{execute:function(){var n=Object(G.a)(z.a.mark((function n(r){var i,l,c;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:t,body:JSON.stringify(a)});case 2:return i=n.sent,n.next=5,i.json();case 5:l=n.sent,c=l.result,r(void 0,i.status,c);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),(function(e){return e.queries}),(function(e){return e.entities}))),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),te=function(e){return e.queries};var ne=function(){return r.a.createElement(c.Provider,{store:ee},r.a.createElement(o.Provider,{queriesSelector:te},r.a.createElement(H,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.a2b0aeb2.chunk.js.map